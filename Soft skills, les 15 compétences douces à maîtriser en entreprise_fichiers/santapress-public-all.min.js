!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}((function(e,o,s,t){var n=[],i=function(){return n.length?n[n.length-1]:null},a=function(){var e,o=!1;for(e=n.length-1;e>=0;e--)n[e].$blocker&&(n[e].$blocker.toggleClass("current",!o).toggleClass("behind",o),o=!0)};e.spmodal=function(o,s){var t,a;if(this.$body=e("body"),this.options=e.extend({},e.spmodal.defaults,s),this.options.doFade=!isNaN(parseInt(this.options.fadeDuration,10)),this.$blocker=null,this.options.closeExisting)for(;e.spmodal.isActive();)e.spmodal.close();if(n.push(this),o.is("a"))if(a=o.attr("href"),this.anchor=o,/^#/.test(a)){if(this.$elm=e(a),1!==this.$elm.length)return null;this.$body.append(this.$elm),this.open()}else this.$elm=e("<div>"),this.$body.append(this.$elm),t=function(e,o){o.elm.remove()},this.showSpinner(),o.trigger(e.spmodal.AJAX_SEND),e.get(a).done((function(s){if(e.spmodal.isActive()){o.trigger(e.spmodal.AJAX_SUCCESS);var n=i();n.$elm.empty().append(s).on(e.spmodal.CLOSE,t),n.hideSpinner(),n.open(),o.trigger(e.spmodal.AJAX_COMPLETE)}})).fail((function(){var s;o.trigger(e.spmodal.AJAX_FAIL),i().hideSpinner(),n.pop(),o.trigger(e.spmodal.AJAX_COMPLETE)}));else this.$elm=o,this.anchor=o,this.$body.append(this.$elm),this.open()},e.spmodal.prototype={constructor:e.spmodal,open:function(){var o=this;this.block(),this.anchor.blur(),this.options.doFade?setTimeout((function(){o.show()}),this.options.fadeDuration*this.options.fadeDelay):this.show(),e(s).off("keydown.modal").on("keydown.modal",(function(e){var o=i();27===e.which&&o.options.escapeClose&&o.close()})),this.options.clickClose&&this.$blocker.click((function(o){o.target===this&&e.spmodal.close()}))},close:function(){n.pop(),this.unblock(),this.hide(),e.spmodal.isActive()||e(s).off("keydown.modal")},block:function(){this.$elm.trigger(e.spmodal.BEFORE_BLOCK,[this._ctx()]),this.$body.css("overflow","hidden"),this.$blocker=e('<div class="'+this.options.blockerClass+' blocker current"></div>').appendTo(this.$body),a(),this.options.doFade&&this.$blocker.css("opacity",0).animate({opacity:1},this.options.fadeDuration),this.$elm.trigger(e.spmodal.BLOCK,[this._ctx()])},unblock:function(o){!o&&this.options.doFade?this.$blocker.fadeOut(this.options.fadeDuration,this.unblock.bind(this,!0)):(this.$blocker.children().appendTo(this.$body),this.$blocker.remove(),this.$blocker=null,a(),e.spmodal.isActive()||this.$body.css("overflow",""))},show:function(){this.$elm.trigger(e.spmodal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=e('<a href="#close-modal" rel="modal:close" class="close-modal '+this.options.closeClass+'">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass).appendTo(this.$blocker),this.options.doFade?this.$elm.css({opacity:0,display:"inline-block"}).animate({opacity:1},this.options.fadeDuration):this.$elm.css("display","inline-block"),this.$elm.trigger(e.spmodal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(e.spmodal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove();var o=this;this.options.doFade?this.$elm.fadeOut(this.options.fadeDuration,(function(){o.$elm.trigger(e.spmodal.AFTER_CLOSE,[o._ctx()])})):this.$elm.hide(0,(function(){o.$elm.trigger(e.spmodal.AFTER_CLOSE,[o._ctx()])})),this.$elm.trigger(e.spmodal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||e('<div class="'+this.options.modalClass+'-spinner"></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},_ctx:function(){return{elm:this.$elm,$elm:this.$elm,$blocker:this.$blocker,options:this.options}}},e.spmodal.close=function(o){if(e.spmodal.isActive()){o&&o.preventDefault();var s=i();return s.close(),s.$elm}},e.spmodal.isActive=function(){return n.length>0},e.spmodal.getCurrent=i,e.spmodal.defaults={closeExisting:!0,escapeClose:!0,clickClose:!0,closeText:"Close",closeClass:"",modalClass:"modal",blockerClass:"jquery-modal",spinnerHtml:'<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div>',showSpinner:!0,showClose:!0,fadeDuration:null,fadeDelay:1},e.spmodal.BEFORE_BLOCK="modal:before-block",e.spmodal.BLOCK="modal:block",e.spmodal.BEFORE_OPEN="modal:before-open",e.spmodal.OPEN="modal:open",e.spmodal.BEFORE_CLOSE="modal:before-close",e.spmodal.CLOSE="modal:close",e.spmodal.AFTER_CLOSE="modal:after-close",e.spmodal.AJAX_SEND="modal:ajax:send",e.spmodal.AJAX_SUCCESS="modal:ajax:success",e.spmodal.AJAX_FAIL="modal:ajax:fail",e.spmodal.AJAX_COMPLETE="modal:ajax:complete",e.fn.spmodal=function(o){return 1===this.length&&new e.spmodal(this,o),this},e(s).on("click.modal",'a[rel~="modal:close"]',e.spmodal.close),e(s).on("click.modal",'a[rel~="modal:open"]',(function(o){o.preventDefault(),e(this).spmodal()}))})),function(e){"use strict";e((function(){function o(e){var o=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return o?o[2]:null}if(e(document).on("click",".santapress-modal",(function(){event.preventDefault(),this.blur();var o=e(this).parent().parent().data("postid");if(-1!==this.href.indexOf("embed")){var s=e('<div class="sp-modal-iframe"><iframe id="sp-iframe" src="'+this.href+'" width="100%" height="100%" frameborder="0" scrolling="no"></iframe></div>');s.appendTo("body").spmodal({fadeDuration:200,clickClose:!1});var t=s.find("iframe"),n=function(){setTimeout((function(){var o,n,i=t[0].contentDocument.location.hash.substring(1);s.addClass("iframeloaded").height(Math.floor(i)),setTimeout((function(){e("body").addClass("modal-open")}),350)}),50)};t.bind("load",n),e.ajax({url:data.ajaxurl,data:{action:"sp_track_iframe",postid:o,nonce:e("#sp-nonce").val()},success:function(){},error:function(e,o,s){console.log(s)}})}else e.ajax({dataType:"html",url:data.ajaxurl,data:{action:"sp_fetch_door",postid:o,nonce:e("#sp-nonce").val()},success:function(o){var s=e(e.parseHTML(o,document,!0));s||console.log("SantaPress: Something went wrong while fetching the door. Please make sure your theme is using the the_content(); for displaying the post content. See also https://santapress.halloecho.de/docs#faq-01-theme-support."),s.hide(),s.appendTo("body").spmodal({fadeDuration:200,clickClose:!1}),-1!==s.html().indexOf("wpcf7")&&wpcf7.init(s.find(".wpcf7-form")[0]),setTimeout((function(){e("body").addClass("modal-open")}),350)},error:function(e,o,s){console.log(s)}});e(this).addClass("open")})),e(".santapress-modal").each((function(){e(this).addClass("loaded")})),e(document).on(e.spmodal.CLOSE,(function(){e(".santapress-modal").removeClass("open"),e("body").removeClass("modal-open")})),e(".santapress-container").hasClass("with-snow")){var s=e(".santapress-container").data("snowcond"),t;"santapress"==e(".santapress-container").data("snowtype")&&("modal"==s&&e("body").addClass("santapress-snow-modal"),"everywhere"==s&&(e('<div class="spsnow"></div>').appendTo("body"),e("body").addClass("santapress-snow-everywhere"),e(".santapress-container").hasClass("hiddenmode")||setTimeout((function(){e("body").addClass("santapress-snow-everywhere-active")}),400)))}if(e(".santapress-container").hasClass("hiddenmode")){e(".santapress-container").appendTo("body").removeClass("hiddenmode").wrap('<div class="santapress-container-outer"></div>');var n=e(".santapress-container").data("timeout"),i=e(".santapress-container").data("hideafterclose"),a=!1;"session"!=i&&"midnight"!=i&&"number"!=typeof i||!o("sp_hm_exp")||(a=!0),("session"==i&&"session"!==o("sp_hm_exp")||"midnight"==i&&"midnight"!==o("sp_hm_exp")||"number"==typeof i&&"h"!==o("sp_hm_exp"))&&(a=!1),a||n>0&&setTimeout((function(){if(e(".santapress-container-outer").fadeIn().addClass("active"),e("body").addClass("santapress-snow-everywhere-active"),i)if("session"==i)document.cookie=encodeURIComponent("sp_hm_exp")+"="+encodeURIComponent("session")+"; path=/";else if("midnight"==i){var o;(o=new Date).setHours(24,0,0,0);var s="; expires="+o.toGMTString();document.cookie=encodeURIComponent("sp_hm_exp")+"="+encodeURIComponent("midnight")+s+"; path=/"}else if("number"==typeof i&&i%1==0){var o;(o=new Date).setTime(o.getTime()+60*i*60*1e3);var s="; expires="+o.toGMTString();document.cookie=encodeURIComponent("sp_hm_exp")+"="+encodeURIComponent("h")+s+"; path=/"}else console.log('SantaPress: Something is wrong with the variable "hide_after_close" you have provided in the shortcode: '+i)}),n);var d=e(".santapress-container").data("trigger");e(document).on("click",d,(function(){e(".santapress-container-outer").fadeIn().addClass("active"),e("body").addClass("santapress-snow-everywhere-active")})),e("#santapress-trigger").length&&e("#santapress-trigger").prependTo("body")}e(document).on("click","#sp-close-hidden-mode",(function(){e(".santapress-container-outer").removeClass("active").fadeOut(),e("body").removeClass("santapress-snow-everywhere-active")})),e(document).on("click",".spquiz-answer",(function(o){o.preventDefault(),this.blur();var s=e(this).find(".spquiz-loader"),t=e(this).parent(),n=e(this).parent().parent(),i=e(this).parent().parent().find(".spquiz-result");s.show(),e.ajax({url:data.ajaxurl,data:{action:"sp_quiz_answer",postid:e(this).parent().parent().data("postid"),answer:encodeURIComponent(e(this).text()),nonce:e("#sp-nonce").val()},success:function(o){if(s.hide(),t.hide(),i.html(o).fadeIn(),-1!==o.indexOf("wpcf7")&&wpcf7.init(i.find(".wpcf7-form")[0]),e("#sp_main_wrap").length){var a=Math.floor(e("#sp_main_wrap").height());e("#sp-iframe",window.parent.document).height(a),e(".sp-modal-iframe",window.parent.document).height(a)}if(1==n.data("qc")){var d=new Date;d.setHours(24,0,0,0);var r="; expires="+d.toGMTString(),l=n.data("postid");1==n.data("qctype")?setTimeout((function(){document.cookie=encodeURIComponent("sp_quiz_cookie")+"="+encodeURIComponent(l)+r+"; path=/"}),500):document.addEventListener("wpcf7mailsent",(function(e){setTimeout((function(){document.cookie=encodeURIComponent("sp_quiz_cookie")+"="+encodeURIComponent(l)+r+"; path=/"}),500)}),!1)}}})})),e(document).on("click",".spquiz-back",(function(o){if(o.preventDefault(),this.blur(),e(this).parent().parent().parent().find(".spquiz-answers").show(),e(this).parent().parent().html(""),e("#sp_main_wrap").length){var s=Math.floor(e(".santapress-post-inner").height())+100;e("#sp-iframe",window.parent.document).height(s),e(".sp-modal-iframe",window.parent.document).height(s)}})),e(document).on(e.spmodal.CLOSE,(function(){e(".modal iframe").attr("src","")}))}))}(jQuery);